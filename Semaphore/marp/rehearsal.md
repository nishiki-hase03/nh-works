# p113～116

## 導入

### 入り

ここまで、LANで通信するために必要な情報、MACアドレスやIPアドレスについて学んできました。

そして先ほど111p（4.5.1）で、１つのネットワーク内に端末を接続しすぎることの問題点（通信効率が下がってしまう）、そしてその解決方法として「LANをHUB、あるいはルーターで拡張すること」について触れましたね。

ここからは、ルーターで拡張されたLANについて詳しく見ていきます。

（40秒）

### 動機付け

このセクションを学ぶことで、あるネットワークから別のネットワークへ通信をするための仕組みを理解することができます。

この通信の仕組みは、ネットワークを語る上で非常に重要な基礎知識となりますので、しっかりと押さえていきましょう。

（20秒）

## p113（4.5.2 ルーターで拡張されたLANで通信に必要な情報）

### 説明の流れ

それでは、113ページ、4.5.2を開いてください。

これまで見てきた、情報を届ける仕組みや、IPアドレスを説明する際に、荷物の配達が例に出てきましたね。

荷物を届ける場所の情報として、「住所」を使うという説明をしてきました。

もう一度住所をよく見てみましょう。大阪府大阪市中央区城見2丁目１ TWIN21 MIDタワー12階。

ここで重要なのが、住所は階層構造になっている、ということです。

例えば、住所の前半「大阪府大阪市」という部分で、その場所を絞り込めるようになっています。

これは、荷物を届ける際に、まずどの営業所に届ければいいか、を判断する際に役立ちますね。

IPアドレスも同様に、どの場所、つまり、どのネットワークにいるかを絞り込める情報が含まれています。

### 重要なポイント

- IPアドレスには、場所（ネットワーク）を特定するために必要な情報が含まれている

### 次項へのつなぎ

次のページからは、ネットワークを特定するために必要な情報とはどういったものかを見ていきましょう。

### 所要時間

4分

## p114（4.5.2 (1)ネットワークアドレスとホストアドレス）

### 説明の流れ

それでは、114ページを開いてください。

先ほどのページで、IPアドレスにはネットワークを特定するための情報が含まれているという話をしました。

テキスト上部の図を見てください。

ルーターによって、3つのネットワークがつながっています。

総務部、営業部、開発部、と書いていますね。

このように、一般的には部署、あるいはフロアごとに、ルーターを用いてネットワークを区切って運用します。

なのでこの図では、総務部のネットワーク、営業部のネットワーク、開発部のネットワークが、ルーターで区切られている様子を表しています。

総務部のネットワークにはPCが3台つながっており、それぞれIPアドレスが割り振られています。

同様に営業部、開発部のネットワークにもPCが3台つながっていますね。

それぞれのネットワーク内のPCのIPアドレスを見て、何か気づいたことはありますか？○○さん、いかがでしょう。

ありがとうございます。その通りですね、どうやら同じネットワーク内では前半部分が同じアドレスになっているようだ、と

総務部のネットワークであれば、どのPCも172.16から始まっているし、営業部であれば172.17、開発部は172.18からアドレスが始まっていますね。

逆に考えると、IPアドレスの前半部分が172.16であれば総務部のネットワーク内にPCがあり、172.17であれば営業部のネットワーク内にPCがある、ということが分かります。

そして、IPアドレスの後半部分は、ネットワーク内では重複していないけど、他のネットワークの端末とは重複しているな、ということが分かります。

このように、IPアドレスには所属するネットワークを識別するための情報、「ネットワークアドレス」

そして、そのネットワーク内で個々のコンピュータを識別するための情報、「ホストアドレス」が含まれています。

### 重要なポイント

- IPアドレスには、所属するネットワークを識別するためのネットワークアドレスという情報が含まれている
- IPアドレスには、所属するネットワーク内で個々のコンピュータを識別するためのホストアドレスという情報が含まれている

### 次項へのつなぎ

今回の例では、IPアドレスの丁度真ん中でネットワークアドレスとホストアドレスが分かれていました。

しかし、実際にはIPアドレスを見ただけでは、どこまでがネットワークアドレスで、どこからがホストアドレスかは判断できません。

その判断をするための仕組みを、次ページで説明します。

<!-- IPアドレスについて少し振り返りましょう。105pを開いてください。

IPアドレスは32ビットの2進数を、8ビット単位で10進数に変換して使用しています。

8ビットということは、とれる値は00000000～11111111、つまり0から255の256個ということになります。

では、114pに戻りましょう。

先ほどは前半部分、後半部分と言っていましたが、少し正確に表現しましょう。

図の例では、上位16ビットがネットワークアドレス、下位16ビットがホストアドレスです。

先ほど8ビットでとれる値は256個という話をしました。では、16ビットでとれる値は何個あるでしょうか。○○さん、いかがでしょう。

ありがとうございます。暗算でやるのは少し難しいですが、16ビットでとれる値は65,536個あります。

つまり、1つのネットワーク内で割り当てることのできるホストアドレスは、下位16ビット分、65,536個ということになりますね。

これは、1つのネットワーク内に接続できる端末数には限りがある、ということです。

仮に、もっと端末をつなぎたい場合はどうすればいいでしょうか。 -->

### 所要時間

7分

## p115（4.5.2 (2)サブネットマスク）

### 説明の流れ

それでは、115ページを開いてください。

先ほどお話しした、どこまでがネットワークアドレスで、どこからがホストアドレスかを判断するための仕組みを、「サブネットマスク」といいます。

まず、テキスト上部の図を見てみましょう。上半分に、先ほど見ていたのと同じIPアドレスが、下半分に、サブネットマスクという記載があります。

IPアドレスは172.16.0.10、サブネットマスクは255.255.0.0。

2進数で表したものが、それぞれ青い枠と赤い枠で囲まれています。

IPアドレスは、10101100.00010000.00000000.00001010

サブネットマスクは、11111111.11111111.00000000.00000000となっています。1がずっと並んでいて、途中からは0が並んでいる、という感じですね。

そして、数字は異なりますが、記載の仕方が似ていますね。8ビットが4つ、ドットで区切られています。

そして、真ん中に、太い赤の点線が引かれており、IPアドレスはどうやらここでネットワークアドレスとホストアドレスが区切られているようです。

では、そのまま少し下を見てみると、丁度サブネットマスクの、1の範囲と0の範囲で分かれていますね。

つまりサブネットマスクの値を上位ビットから確認し、1が続いている間はネットワークアドレスで、0に切り替わってからはホストアドレスを表しています。

今回の例では、サブネットマスクの値が255.255.0.0であり、2進数に変換すると上位16ビットが1で下位16ビットが0となっています。

つまり、このIPアドレスの上位16ビットがネットワークアドレスであり、下位16ビットがホストアドレスである、ということです。

### 重要なポイント

- IPアドレスとサブネットマスクはセット
- サブネットマスクはIPアドレスと同じ32ビット
- ネットワークアドレス部分のビットを1で表し、ホストアドレス部分のビットを0で表す。

### 次項へのつなぎ

ここまでで、ルーターで拡張されたLANで通信するのに必要な情報をいくつか見てきました。

IPアドレスから、所属するネットワークとホストが分かる、と、

しかし、実際にコンピュータが通信を受信するには、MACアドレスが必要でしたね。

次ページに入る前に、復習として106ページを開いてください。

コンピュータが、最終的に通信を受信するかを判断するためには、MACアドレスを用いる必要がある、とお話ししました。

MACアドレス、覚えていますか？物理的なアドレスで、NICに割り当てられており

IPアドレスからMACアドレスを調査するための仕組みとして、ARPというものがある、と学びました。

ARPでは、ブロードキャストで、ネットワーク内のコンピュータに対して通信を行い、該当するIPアドレスのコンピュータがMACアドレスを教えてくれる仕組みでしたね。

では、112ページを開いてください。ここは参考なので、軽く聞いてください。

実はですね、ルーターはブロードキャスト通信を遮断する、という特徴があります。

つまり、異なるネットワークに属するコンピュータに対しては、ARPを使ってMACアドレスを調べて通信する、ということができないわけです。

では、どうやって、ネットワークをまたいで通信を行うのか。次ページから見ていきましょう。

### 所要時間

6分

## p116（4.5.2 (3)デフォルトゲートウェイ）

### 説明の流れ

デフォルトゲートウェイ、と書かれていますね。

意味を調べてみましょう。「デフォルト」は、日本でもそのまま「デフォルト」と言われることが多いですが、既定の、という意味ですね。

「ゲートウェイ」とは何か、「関門」や「出入口」という意味があります。

つまり、既定の出入口、という意味ですね。デフォルトでどこに通信すれば良いかを指定するもの、

ブロードキャスト通信ができない、つまりARPを使ってMACアドレスを調べることができない

他のネットワークセグメントに通信するために使用する、ルーターのIPアドレスを指定するもの、これがデフォルトゲートウェイです。

イメージとしては、電車での移動に近いと思います。

突然ですが皆さんは新宿駅にいて、そこから名古屋の栄駅に電車で行きたいと思ったとしましょう。

ですが、調べてみるとどうやら、新宿駅から栄駅に直接行ける電車は無いようです。

その場合、皆さんならどうしますか？東京から名古屋方面に行くなら、まずは新幹線に乗らないと行けないから、品川駅に行かなければいけないだろうな、と。

そして、新宿駅から品川駅に向かい、品川駅で新幹線に乗り換えて名古屋方面に向かう、という流れになるでしょう。

こういった感じで、自分のいる場所とは離れた位置に行く際に、とりあえず向かう駅が、デフォルトゲートウェイだ、と考えてください。

通信でも同様に、自分のいるネットワークと異なるネットワークに通信する場合に、とりあえず通信する先、ここではルーターがデフォルトゲートウェイになります。

### 重要なポイント

- デフォルトゲートウェイには、そのコンピュータが所属するネットワークセグメント内のルーターのIPアドレスを設定する
- 異なるネットワークに対する通信の際は、デフォルトゲートウェイ（ルーター）に一旦送る
- 自身と同じネットワークであれば、直接通信を行う

### 次項へのつなぎ

それでは、ここまでの流れを、次ページでまとめておさらいしましょう。

### 所要時間

3分
